# GraphQL Query definitions for Uniswap V3 Subgraph

query GetPosition($tokenId: ID!) {
  position(id: $tokenId) {
    id
    liquidity
    depositedToken0
    depositedToken1
    withdrawnToken0
    withdrawnToken1
    collectedFeesToken0
    collectedFeesToken1
    transaction {
      id
      timestamp
      blockNumber
      gasUsed
      gasPrice
    }
    pool {
      id
      token0 {
        id
        symbol
        name
        decimals
      }
      token1 {
        id
        symbol
        name  
        decimals
      }
      feeTier
      token0Price
      token1Price
      liquidity
      sqrtPrice
      tick
    }
  }
}

query GetPositionsByOwner($owner: Bytes!, $first: Int!, $skip: Int!) {
  positions(
    where: { owner: $owner }
    first: $first
    skip: $skip
    orderBy: transaction__timestamp
    orderDirection: desc
  ) {
    id
    liquidity
    depositedToken0
    depositedToken1
    withdrawnToken0
    withdrawnToken1
    collectedFeesToken0
    collectedFeesToken1
    transaction {
      id
      timestamp
      blockNumber
    }
    pool {
      id
      token0 {
        id
        symbol
        name
        decimals
      }
      token1 {
        id
        symbol
        name
        decimals
      }
      feeTier
      token0Price
      token1Price
    }
  }
}

query GetPool($poolId: ID!) {
  pool(id: $poolId) {
    id
    createdAtTimestamp
    createdAtBlockNumber
    token0 {
      id
      symbol
      name
      decimals
      totalSupply
      volume
      volumeUSD
      derivedETH
      totalValueLocked
      totalValueLockedUSD
    }
    token1 {
      id
      symbol
      name
      decimals
      totalSupply
      volume
      volumeUSD
      derivedETH
      totalValueLocked
      totalValueLockedUSD
    }
    feeTier
    token0Price
    token1Price
    liquidity
    sqrtPrice
    tick
    volumeToken0
    volumeToken1
    volumeUSD
    totalValueLockedToken0
    totalValueLockedToken1
    totalValueLockedUSD
    feesUSD
    txCount
  }
}

query GetFactory($factoryId: ID!) {
  factory(id: $factoryId) {
    id
    poolCount
    txCount
    totalVolumeUSD
    totalVolumeETH
    totalFeesUSD
    totalFeesETH
    totalValueLockedUSD
    totalValueLockedETH
    owner
  }
}

query GetToken($tokenId: ID!) {
  token(id: $tokenId) {
    id
    symbol
    name
    decimals
    totalSupply
    volume
    volumeUSD
    feesUSD
    txCount
    poolCount
    totalValueLocked
    totalValueLockedUSD
    derivedETH
  }
}

query GetPoolDayData($poolId: String!, $startTime: Int!, $endTime: Int!) {
  poolDayDatas(
    where: { 
      pool: $poolId, 
      date_gte: $startTime, 
      date_lte: $endTime 
    }
    orderBy: date
    orderDirection: asc
  ) {
    id
    date
    liquidity
    sqrtPrice
    token0Price
    token1Price
    tick
    tvlUSD
    volumeToken0
    volumeToken1
    volumeUSD
    feesUSD
    txCount
    open
    high
    low
    close
  }
}